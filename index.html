<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Truth or Dare Game</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            text-align: center;
            padding: 20px;
            margin: 0;
            background: #111;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            box-sizing: border-box;
            visibility: hidden; /* Initially hidden until animation completes */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        body.visible {
            visibility: visible;
            opacity: 1;
        }
        button {
            padding: 12px 24px;
            font-size: 18px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background: #ffd700;
            color: #111;
            font-weight: bold;
            width: 80%;
            max-width: 300px;
        }
        input[type="number"] {
            padding: 10px;
            font-size: 18px;
            width: 80%;
            max-width: 200px;
            margin: 10px auto;
            border-radius: 5px;
            border: none;
            text-align: center;
        }
        #result, #number, #choice p {
            font-size: 20px;
            margin: 15px 0;
            padding: 0 10px;
        }
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            animation: fadeOutOverlay 0.5s ease-in-out 1s forwards;
        }
        #overlay-text {
            font-size: 8vw;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 12px #ffd700, 0 0 24px #ff4500, 0 0 36px #ff6347;
            animation: slideInRotate 0.25s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
            letter-spacing: 3px;
            text-align: center;
            transform: translateY(100px) rotate(-5deg);
            opacity: 0;
        }
        @keyframes slideInRotate {
            0% { transform: translateY(100px) rotate(-5deg); opacity: 0; }
            100% { transform: translateY(0) rotate(0deg); opacity: 1; }
        }
        @keyframes fadeOutOverlay {
            to { opacity: 0; visibility: hidden; }
        }
    </style>
</head>
<body>
    <audio id="backgroundMusic" autoplay loop>
        <source src="./Pressure.mp3" type="audio/mpeg">
        Your browser does not support the audio element. Please ensure the audio file is available and try again.
    </audio>

    <div id="overlay">
        <div id="overlay-text">TRUTH OR DARE</div>
    </div>

    <h1>Truth or Dare Game</h1>
    <p>Enter the number of players:</p>
    <input type="number" id="playerCount" min="2" placeholder="Number of players">
    <button onclick="startGame()">Start Game</button>

    <div id="number"></div>
    <div id="choice" style="display:none;">
        <p>Choose: Truth or Dare?</p>
        <button onclick="choose('truth')">Truth</button>
        <button onclick="choose('dare')">Dare</button>
    </div>
    <div id="result"></div>

    <script>
        const truths = [
            "What is your biggest fear?",
            "Have you ever lied to your best friend?",
            "What's a secret you have never told anyone?",
            "Who was your first crush?",
            "What’s the most embarrassing thing you've done?"
        ];

        const dares = [
            "Do 10 jumping jacks.",
            "Sing a song loudly.",
            "Dance without music for 30 seconds.",
            "Act like a monkey for 1 minute.",
            "Call a friend and confess you love ice cream passionately."
        ];

        // Audio error handling
        const audio = document.getElementById('backgroundMusic');
        audio.addEventListener('error', () => {
            console.error('Failed to load audio file. Ensure "./Pressure.mp3" is in the correct directory or use a valid URL.');
        });

        // Handle autoplay restrictions
        audio.muted = true; // Start muted to bypass autoplay restrictions
        audio.play().then(() => {
            audio.muted = false; // Unmute after play starts
        }).catch(err => {
            console.warn('Autoplay blocked:', err);
            // Unmute on first user interaction
            document.addEventListener('click', () => {
                audio.muted = false;
                audio.play();
            }, { once: true });
        });

        window.addEventListener('load', () => {
            setTimeout(() => {
                document.body.classList.add('visible');
            }, 1500); // Matches animation duration (1s + 0.5s fade-out + 0.25s buffer)
        });

        function startGame() {
            const playerCount = document.getElementById('playerCount').value;
            const num = parseInt(playerCount);

            if (isNaN(num) || num < 2) {
                alert('Please enter a valid number of players (at least 2).');
                return;
            }

            const randomPlayer = Math.floor(Math.random() * num) + 1;
            document.getElementById('number').innerText = `Player ${randomPlayer}, it’s your turn!`;
            document.getElementById('choice').style.display = 'block';
            document.getElementById('result').innerText = '';
        }

        function choose(option) {
            let output = '';
            if (option === 'truth') {
                const question = truths[Math.floor(Math.random() * truths.length)];
                output = `Your Truth question: ${question}`;
            } else if (option === 'dare') {
                const dare = dares[Math.floor(Math.random() * dares.length)];
                output = `Your Dare: ${dare}`;
            }
            document.getElementById('result').innerText = output;
        }
    </script>
</body>
</html>
